<!DOCTYPE html>
<!-- saved from url=(0050)http://getbootstrap.com/examples/jumbotron-narrow/ -->
<html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta name="description" content="">
<meta name="author" content="">
<link rel="icon" href="http://getbootstrap.com/favicon.ico">

<title>III EEBA - 2015</title>

<!-- Bootstrap core CSS -->
<link href="http://getbootstrap.com/dist/css/bootstrap.min.css" rel="stylesheet">

<!-- Custom styles for this template -->
<link href="http://getbootstrap.com/examples/jumbotron-narrow/jumbotron-narrow.css" rel="stylesheet">
<link href="./css/main.css" rel="stylesheet">

<!-- Just for debugging purposes. Don't actually copy these 2 lines! -->
<!--[if lt IE 9]><script src="../../assets/js/ie8-responsive-file-warning.js"></script><![endif]-->
<script src="./narrow/ie-emulation-modes-warning.js"></script>


    
    <link href="https://cdnjs.cloudflare.com/ajax/libs/angularjs-toaster/0.4.9/toaster.min.css" rel="stylesheet" />



<!-- HTML5 shim and Respond.js for IE8 support of HTML5 elements and media queries -->
    <!--[if lt IE 9]>
      <script src="https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js"></script>
      <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
      <![endif]-->
    </head>

    <body ng-app="app">

      <div class="container" ng-controller="UserController">
        <toaster-container></toaster-container>
        <div class="header">
         <img src="./img/iiieeba2015_logo.png" alt="logo eeeba">
         <nav >

           <ul class="nav nav-pills pull-left" id="ribbon">
             <br>
             <li role="presentation" ><a href="index.html">PROGRAMAÇÃO</a></li>
             <li role="presentation"><a href="informacoes.html">COMO PARTICIPAR</a></li>
             <li role="presentation"><a href="participantes.html">SOBRE OS PARTICIPANTES</a></li>
             <li role="presentation" class="active"><a href="chat.html">CHAT</a></li>


             <li role="presentation"  ng-show="isAdmin"><a href="chat.html">Admin</a></li>

           </ul>

         </nav>
         
       </div>
       <br><br>

       <div class="row">
        <span id="ribbon"></span>
      </div>

      <div class="row">
       <div class="col-md-8">
         <ol class="breadcrumb white">
           <li><a href="index.html">Início</a></li>
           <li class="active">Chat</li>
         </ol>
       </div>

       <div class="col-md-3 col-md-offset-1">
         <ol class="breadcrumb white">
           <li class="text-right"><a href="#">Usuário <span ng-show="usuario">: {{usuario.name}}</span>           </a></li> 
           <a href="#" ng-show="usuario"  ng-click="logout()"> Logout</a>
         </ol>

       </div>

     </div>


     <div class="row" ng-show="usuario">
       <div class="col-lg-9">

         <!-- chat init -->

         <div id='messagesDiv'></div>
         <br>
         <input type='text' id='nameInput'  placeholder='Nome'>
         <input type='text' id='messageInput' placeholder='Menssagem' size="45">
         <br>
         
           <!--div class="input-group">
             <input type="text" class="form-control" id="inputGroupSuccess2" aria-describedby="inputGroupSuccess2Status">
             <span class="input-group-addon"> <img width="14" height="17" src="./img/ic_send_holo_light.png" alt="send icon"> </span>
           </div -->





           <!-- chat end  -->


           <br>
         </div>
         
         <div class="col-lg-3">

           <div class="panel panel-info">
             <div class="panel-heading">
               <h3 class="panel-title">Usuários online</h3>
             </div>
             <div class="panel-body">
               <div id="users"></div>
             </div>
           </div>



         </div>
       </div>




       <div class="row" ng-hide="usuario">
        <div class="col-md-4">          
            <!-- LOGIN -->
            <form id="frmLogin" role="form">
             <h2>Login</h2>

             <div class="form-group">
              <label for="txtEmail">Endereço de email</label>
              <input type="email" class="form-control" ng-model="email" id="txtEmail" placeholder="Email" name="email" />
            </div>
            <div class="form-group">
              <label for="txtPass">Senha</label>
              <input type="password" class="form-control" ng-model="pass" id="txtPass" placeholder="Senha" name="password" />
            </div>
            <button type="submit" class="btn btn-info btn-block" ng-click="login(email, pass)" >Login</button>
        </div>
        <div class="col-md-8">
           <div class="well">
             <h2>Cadastre-se</h2>
             <p>Caso não seja cadastrado no site, envie uma solicitação através do formulário abaixo</p>
             <div class="form-group">
              <label for="txtEmail">Endereço de email</label>
              <input type="email" class="form-control" ng-model="email" id="txtEmail" placeholder="Email" name="email" />
            </div>
            <div class="form-group">
              <label for="txtPass">Senha</label>
              <input type="password" class="form-control" ng-model="pass" id="txtPass" placeholder="Senha" name="password" />
            </div>
            <button type="submit" class="btn btn-info btn-block" ng-click="login(email, pass)" >Cadastro</button>
           </div>

        </div>
      </div>




        <footer class="footer">
          <p>© Company 2015</p>
        </footer>

      </div> <!-- /container -->


      <!-- IE10 viewport hack for Surface/desktop Windows 8 bug -->
      <script src="./narrow/ie10-viewport-bug-workaround.js"></script>
      <script src='https://cdn.firebase.com/js/client/2.0.4/firebase.js'></script>
      <script src='https://ajax.googleapis.com/ajax/libs/jquery/1.11.1/jquery.min.js'></script>
      <script src="https://cdnjs.cloudflare.com/ajax/libs/angular.js/1.3.13/angular.js"></script>
      <script src="https://cdn.firebase.com/js/client/2.1.2/firebase.js"></script>
      <script src="https://cdn.firebase.com/libs/angularfire/0.9.2/angularfire.min.js"></script>

            
      <script src="https://code.angularjs.org/1.3.13/angular-animate.min.js" ></script>
      <script src="https://cdnjs.cloudflare.com/ajax/libs/angularjs-toaster/0.4.9/toaster.min.js"></script>

      <script src="./js/app.js"></script>


      <script type="text/javascript" charset="utf-8" async defer>
      (function(){
       var myDataRef = new Firebase('https://shining-heat-6825.firebaseio.com/');
       var userArray = [""];
       $('#messageInput').keypress(function (e) {
        if (e.keyCode == 13) {
          var name = $('#nameInput').val();
          var text = $('#messageInput').val();

          var _data = new Date();
          var _time = _data.getDate()+"/"+(_data.getMonth()+1)+"/"+_data.getFullYear()+" "+_data.getHours()+":"+_data.getMinutes()

          myDataRef.push({name: name, text: text, timeSent: _time });
          $('#messageInput').val('');

        }
      });

       myDataRef.on('child_added', function(snapshot) {
        var message = snapshot.val();
        displayChatMessage(message.name, message.text, message.timeSent);                      
      });


       function displayChatMessage(name, text, timeSent) {

        $('<div/>').text(text).prepend($('<em/>').text(name+' '+ timeSent+ ' : ')).appendTo($('#messagesDiv'));
        $('#messagesDiv')[0].scrollTop = $('#messagesDiv')[0].scrollHeight;                        
        if(userArray.indexOf(name) <= 0){
          userArray.push(name);              
          $('<div/>').text(name).appendTo($('#users'));
          $('#users')[0].scrollTop = $('#users')[0].scrollHeight;   
        }            
      };

    })();








    </script>


  </body></html>